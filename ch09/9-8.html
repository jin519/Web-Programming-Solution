<!-- 399p 예제 9-8 -->

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>이벤트 흐름</title>
</head>

<body onload="init()">
    <p style="color:blue;">
        이것은 <span style="color:red;" id="span">문장입니다.</span>
    </p>
    <form>
        <input type="text" name="s">
        <input type="button" value="테스트" id="button">
        <hr>
    </form>
    <div id="div" style="color:green;"></div>
    <script>
        var div; // 이벤트 메시지 출력 공간
        var button;

        function init() {
            div = document.getElementById("div");
            button = document.getElementById("button");

            document.body.addEventListener("click", capture, true); // 캡쳐 단계 (1)
            button.addEventListener("click", bubble, false); // 버블 단계 (2)
            document.body.addEventListener("click", bubble, false); // 버블 단계 (3)
        }

        function capture(event) {
            var obj = event.currentTarget; // 현재 이벤트를 받은 dom 객체
            var tagName = obj.tagName; // 태그 이름
            div.innerHTML += ("<br>capture 단계: " + tagName + " 태그 " + event.type + "이벤트");
        }

        function bubble(event) {
            var obj = event.currentTarget; // 현재 이벤트를 받은 dom 객체
            var tagName = obj.tagName; // 태그 이름
            div.innerHTML += ("<br>bubble 단계: " + tagName + " 태그 " + event.type + "이벤트");
        }
    </script>
</body>

</html>